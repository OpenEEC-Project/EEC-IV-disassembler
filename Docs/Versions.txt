
Version Summary


** Version 4.0.1 *****************

Automatically handles VARIABLE ARGUMENTS.

Issues.

Doesn't always expand tables (2D lookups) to their full size

May miss code blocks which are called via a 'remote' push.
This is where code sets a register remotely form the call.
E.g. A9L has a LDX, R34, 79f9; and a PUSH(R34); elsewhere,
so 79f9 is missed. Add a  'scan 79f9' comand in the directive file to sort this.   

May not always get correct size of arguments shows 2 bytes instead of one word,
but encoded addresses work (as far as I can tell) 

Cannot always determine correct order of banks in file for mutlibanks.

Added SADwin as separate subdirectory, with its source code

- - - - -

2 quick fixes so far, kept version as 4.0.1

1. change SUB command to ignore any extra parameters (works same as SYM for now)
2. Fix platform problem causing incorrect emulation, and so wrong number of arguments
   in some subroutines (64 bit linux to 32 bit Windows)


... I'm sure there's more bugs to find ! .......


- - - - -
(no version 3.09)
- - - - -

** Version 3.08 *****************

Fixed  - Incorrect data structure boundary check sometimes causes fail to print next structure correctly. (e.g.table and function)

Rewrite large part of bank detection code after discovering several issues with 'odd' sized binaries (i.e. not a multiple of 64 or 56K), 
and ones with a missing or extra byte at front. Also more errors with single bank 8065 bins (Australian ones mainly).  Also now allow
handling of a bin with a duplicate code bank ( did someone do some with 'original-modified' banks together in same file ??)


Rewrite parts of print routines to - 
Change - (cosmetic) Add extra separation for comments where printout overlaps normal comments column.  Remove redundant spaces.  
Fixed  - Incorrect source print for several conditional jumps following 3 operand opcodes and "R0 =" instructions  
Change - Swop operand printout order for compare "0 = Rxx" cases with all conditional jumps (and operator so it's valid logic). 

NB. still get some incorrect source prints for if(??) to be sorted out.  e.g  'if (0=0)' 

Rewrite background task list detection and verification from PUSH opcodes, 3.07 doesn't handle all the bins correctly. 

Tidy up incorrect printout when 'filler' area is not 0xff, which happens in some binaries.

Allow operand prints in comment lines with \1 \2 \3 


** Version 3.07 *****************

** NOT FULLY TESTED ** INTERIM RELEASE **

Reorder/Tidy opcode internal tables - last phase (I hope)

Fixed -  Fail to pick up a PUSH(addr) in the initial code block as a jump to rest of code (LA3)
Fixed -  Error in analysis of indexed PUSH(Rxx + ADDR) can cause a data address to be incorrectly interpreted as code.
Fixed -  Error in processing of function and table lookup subroutines gives inconsistent results for signed vs. unsigned structures. (AGAIN!!)
Fixed -  Finding banks in multibank bin may fail if a bank has extra NOP opcodes at front.
Fixed -  Fixed inconsistent output order of newlines with comment blocks

Change - Hold mechanism (for subroutine arguments) to a more efficient chain setup.
Added -  Handling of bins which use altstack (R22) for their background task list e.g. BWAK3N2.bin  (needs more testing, but seems to work)
Added -  optional address ranges for commands RBASE and SYMbol. See documentation for correct syntax.   

Improve print handling of R0 in conditional jumps (not quite right yet...)

Still doesn't always get subroutine arguments right !! 


** Version 3.06 *****************

Fixed - ADDC with folowing JC/JNC not including carry flag in comment
Fixed - JNVT sometimes prints as "if (CY)" should be "if (OVT)"
Fixed - NRML opcode prints as "Rxx = NRML(0);"  instead of "NRML(Ryy);"
Fixed - Error in address overlap checking can 'lose' commands entered.  

Add check for JC/JNC after INC or DEC opcodes.
Add glossary at top of listing.

Change shifts to put a comment for equivalent multiply and divide instead of substituting it.
Change (long) and (int)  to LR and WR format, add S (signed) and Y (byte) where relevant for extra clarity.

Reorder internal index tables for opcodes (declared in case new bug pops up) 

Removed 'V' option (divisor) for words and bytes - it doesn't work anyway.
Removed incorrect debug info in subroutine listings.

